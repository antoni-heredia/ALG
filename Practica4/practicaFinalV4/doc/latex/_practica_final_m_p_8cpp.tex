\hypertarget{_practica_final_m_p_8cpp}{}\section{Referencia del Archivo src/\+Practica\+Final\+MP.cpp}
\label{_practica_final_m_p_8cpp}\index{src/\+Practica\+Final\+M\+P.\+cpp@{src/\+Practica\+Final\+M\+P.\+cpp}}


Práctica Final Metodología de la Programación. Curso 2016/2017.  


{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$fstream$>$}\\*
{\ttfamily \#include \char`\"{}Punto.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Problema.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Solucion.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}funciones.\+h\char`\"{}}\\*
Dependencia gráfica adjunta para Practica\+Final\+M\+P.\+cpp\+:
% FIG 0
\subsection*{Funciones}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{_practica_final_m_p_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Descripción detallada}
Práctica Final Metodología de la Programación. Curso 2016/2017. 

\begin{DoxyDate}{Fecha}
30/05/2017  Hinojosa Castro, Miguel Ángel  Luque Callejas, David 
\end{DoxyDate}


\subsection{Documentación de las funciones}
\index{Practica\+Final\+M\+P.\+cpp@{Practica\+Final\+M\+P.\+cpp}!main@{main}}
\index{main@{main}!Practica\+Final\+M\+P.\+cpp@{Practica\+Final\+M\+P.\+cpp}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{_practica_final_m_p_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{}\label{_practica_final_m_p_8cpp_a0ddf1224851353fc92bfbff6f499fa97}

\begin{DoxyCode}
16                                \{
17     srand(time(NULL));  
18 
19     \textcolor{keywordtype}{string} nombreInstancia,nombreSalida;
20     \hyperlink{class_problema}{Problema} problema;
21     \textcolor{keywordtype}{int} n,i=0;
22     \textcolor{keywordtype}{int} longitudBase,mejorLongitud;
23     \hyperlink{class_solucion}{Solucion} solucionBase(i);
24     \hyperlink{class_solucion}{Solucion} mejorSol(i);
25     ifstream lectura;
26     \textcolor{keywordflow}{switch}(argc)\{
27         \textcolor{keywordflow}{case} 2: 
28             lectura.open(argv[1]);
29             \textcolor{keywordflow}{if} (!lectura) \{
30                 cerr << \textcolor{stringliteral}{"No se pudo abrir el archivo "} << argv[1]<<\textcolor{stringliteral}{".\(\backslash\)n"};
31                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};
32             \}
33             
34             \textcolor{comment}{//1. supongamos que la primera instancia se llama cxx.tsp. Crear un objeto de la clase Problema}
35             \textcolor{comment}{//a partir del fichero cxx.tsp. Si el fichero no existe, se ignora (saltar al paso 4).}
36             \textcolor{keywordflow}{while}(!lectura.eof())\{
37                 lectura >> nombreInstancia;
38                 \textcolor{keywordflow}{if}(problema.\hyperlink{class_problema_adafab71affe601ae2c2ed7044edcd5f8}{Leer}(nombreInstancia.c\_str()))\{
39                     \textcolor{comment}{//2. Obtener la mejor solución posible utilizando la heurística del vecino más cercano
       para ese problema.}
40                     n=problema.\hyperlink{class_problema_ada03c7fad394755e16d3cb1028cae674}{tamanio}();
41                     solucionBase.CambiarTamanio(n);
42                     mejorSol.CambiarTamanio(n);
43                     
44                     \hyperlink{funciones_8h_ae3a984c40f9b01c6962e4c9dbde8645e}{VecinoMasCercano}(problema,0, solucionBase, longitudBase);
45                     mejorLongitud=longitudBase;
46                     mejorSol=solucionBase;
47         
48                     \textcolor{keywordflow}{for}(i=1;i<n;i++)\{
49                         \hyperlink{funciones_8h_ae3a984c40f9b01c6962e4c9dbde8645e}{VecinoMasCercano}(problema,i, solucionBase, longitudBase);
50                         \textcolor{keywordflow}{if}(longitudBase<mejorLongitud)\{
51                             mejorLongitud=longitudBase;
52                             mejorSol=solucionBase;
53                         \}
54                     \}
55                     \textcolor{comment}{//3. Guardar dicha solución en el fichero cxx.sol.}
56                     nombreSalida=nombreInstancia.substr(0,nombreInstancia.length()-4)+\textcolor{stringliteral}{".sol"};
57                     \hyperlink{funciones_8h_ac8c72e03d3bc3d10357401df2126ca71}{guardarSolucion}(nombreSalida.c\_str(),nombreInstancia.c\_str(),problema,
      mejorSol);
58                     \textcolor{comment}{//4. Volver al paso 1 y repetir para el resto de las instancias indicadas en el fichero
       de entrada.}
59                 \}
60             \}
61             lectura.close();
62             
63             
64         \textcolor{keywordflow}{break};
65         \textcolor{keywordflow}{case} 3:
66             \textcolor{comment}{//1. Crear un objeto de la clase Problema a partir del fichero cxx.tsp. Si el fichero no
       existe, se muestra un mensaje de error y se analiza la ejecucion.  }
67             \textcolor{keywordflow}{if}(problema.\hyperlink{class_problema_adafab71affe601ae2c2ed7044edcd5f8}{Leer}(argv[1]))\{
68 
69                 n=problema.\hyperlink{class_problema_ada03c7fad394755e16d3cb1028cae674}{tamanio}();
70                 solucionBase.CambiarTamanio(n);
71                 mejorSol.CambiarTamanio(n);
72         
73     
74             \textcolor{comment}{//2. Obtener la mejor solución posible utilizando la heurística del vecino máas cercano}
75                 \hyperlink{funciones_8h_ae3a984c40f9b01c6962e4c9dbde8645e}{VecinoMasCercano}(problema,0, solucionBase, longitudBase);
76                 mejorLongitud=longitudBase;
77                 mejorSol=solucionBase;
78         
79                 \textcolor{keywordflow}{for}(i=1;i<n;i++)\{
80                     \hyperlink{funciones_8h_ae3a984c40f9b01c6962e4c9dbde8645e}{VecinoMasCercano}(problema,i, solucionBase, longitudBase);
81                     \textcolor{keywordflow}{if}(longitudBase<mejorLongitud)\{
82                         mejorLongitud=longitudBase;
83                         mejorSol=solucionBase;
84                     \}
85                 \}
86             \textcolor{comment}{//3. Guardar dicha solución en un fichero cuyo nombre sería el indicado en el segundo
       argumento.}
87             \hyperlink{funciones_8h_ac8c72e03d3bc3d10357401df2126ca71}{guardarSolucion}(argv[2],argv[1],problema,mejorSol);
88             \}\textcolor{keywordflow}{else}
89                 cout<<\textcolor{stringliteral}{"Error al abrir el fichero "}<<argv[1]<<\textcolor{stringliteral}{"."}<<endl;
90             
91         \textcolor{keywordflow}{break};
92         \textcolor{keywordflow}{default}: cout<<\textcolor{stringliteral}{"Error. Número de argumentos no válido."}<<endl<<\textcolor{stringliteral}{"La sintaxis correcta es: tspFinal
       listado o bien tspFinal instancia salida."}<<endl;
93     \}   
94 \}
\end{DoxyCode}
